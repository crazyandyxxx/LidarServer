function drawColorbar(t){var a=document.getElementById("canvas");width=a.width,height=a.height;var r=a.getContext("2d"),e=r.createLinearGradient(0,10,0,250);for(let a=0;a<t;a++){var o=getColor(a/(t-1),0,1,1),n="rgb("+Math.floor(255*o.r)+","+Math.floor(255*o.g)+","+Math.floor(255*o.b)+")";e.addColorStop(1-a/(t-1),n)}r.fillStyle=e,r.fillRect(0,10,10,240)}var tickColor="black",textColor="black";function drawTicks(){var t=document.getElementById("canvas"),a=t.getContext("2d");a.clearRect(10,0,t.width,t.height),a.strokeStyle=tickColor;for(let t=0;t<6;t++)a.beginPath(),a.moveTo(10,10+48*t),a.lineTo(15,10+48*t),a.stroke()}function drawTickText(){var t=document.getElementById("canvas"),a=t.getContext("2d");a.clearRect(16,0,t.width,t.height);let r=(vMax-vMin)/5;a.fillStyle=textColor;for(let t=0;t<6;t++)a.fillText((vMax-t*r).toExponential(1),16,10+48*t)}function getColor(t,a,r,e){var o={};t<a&&(t=a),t>r&&(t=r);var n=r-a;if(o.a=e-.1+.2*(t-a)/n,t<a+.25*n){var h=4*(t-a)/n;o.r=0,o.g=h,o.b=1}else if(t<a+.5*n){var i=1+4*(a+.25*n-t)/n;o.r=0,o.g=1,o.b=i}else if(t<a+.75*n){var l=4*(t-a-.5*n)/n;o.r=l,o.g=1,o.b=0}else{h=1+4*(a+.75*n-t)/n;o.r=1,o.g=h,o.b=0}return o}function createColorScale(t){var a=[];for(let o=0;o<t;o++){var r=getColor(o/(t-1),0,1,1),e="rgb("+Math.floor(255*r.r)+","+Math.floor(255*r.g)+","+Math.floor(255*r.b)+")";a.push([o/(t-1),e])}return a}function CloseHeatMap(){$("#heatDiv").fadeOut(),$("#show-heat").show(),$("#colorbar").show()}function ShowHeatMap(){$("#heatDiv").fadeIn(),$("#show-heat").hide(),$("#colorbar").hide()}function Gps84ToGcj02(t,a){if(outOfChina(t,a))return new AMap.LngLat(t,a);let r=6378245,e=.006693421622965943,o=TransformLat(t-105,a-35),n=TransformLon(t-105,a-35),h=a/180*Math.PI,i=Math.sin(h);i=1-e*i*i;let l=Math.sqrt(i),M=a+(o=180*o/(r*(1-e)/(i*l)*Math.PI)),s=t+(n=180*n/(r/l*Math.cos(h)*Math.PI));return new AMap.LngLat(s,M)}function outOfChina(t,a){return t<72.004||t>137.8347||(a<.8293||a>55.8271)}function TransformLat(t,a){var r=2*t-100+3*a+.2*a*a+.1*t*a+.2*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,r+=2*(20*Math.sin(a*Math.PI)+40*Math.sin(a/3*Math.PI))/3,r+=2*(160*Math.sin(a/12*Math.PI)+320*Math.sin(a*Math.PI/30))/3}function TransformLon(t,a){var r=300+t+2*a+.1*t*t+.1*t*a+.1*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,r+=2*(20*Math.sin(t*Math.PI)+40*Math.sin(t/3*Math.PI))/3,r+=2*(150*Math.sin(t/12*Math.PI)+300*Math.sin(t/30*Math.PI))/3}
